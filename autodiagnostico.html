<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Autodiagn√≥stico ¬∑ Matem√°tica a Pedal</title>

  <!-- Estilo global -->
  <link rel="stylesheet" href="https://utec-math.github.io/matematica-a-pedal/assets/style.css?v=3">

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[','\\]'], ['$$','$$']]
      }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

  <style>
    .ad-intro {
      background: linear-gradient(90deg,#FFD580,#FFA559);
      border-radius: 14px;
      padding: 20px;
      border: 2px solid #fff;
      box-shadow: 0 6px 16px rgba(0,0,0,.08);
      margin-top: 16px;
    }
    .ad-card {
      border: 1px solid #FFD580;
      border-radius: 12px;
      padding: 14px;
      margin-top: 18px;
      background: #FFFDF7;
    }
    .ad-card h2 {
      margin-top: 0;
      color: #783f04;
    }
    .ad-question {
      margin-top: 10px;
      padding-top: 8px;
      border-top: 1px dashed #FFE0A8;
    }
    .ad-options label {
      display: block;
      margin: 3px 0;
      cursor: pointer;
    }
    .ad-actions {
      margin-top: 18px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .ad-actions button {
      cursor: pointer;
      color: #783f04;
      background: #fff;
      border: 1px solid #FFD580;
      border-radius: 10px;
      padding: 8px 12px;
      font-family: 'Roboto Mono', monospace;
    }
    .ad-result {
      margin-top: 18px;
      border: 1px solid #FFD580;
      border-radius: 12px;
      padding: 14px;
      background: #FFF6E6;
    }
  </style>
</head>

<body>

  <div id="header-placeholder"></div>
  <script src="/matematica-a-pedal/assets/load-header.js"></script>

  <main id="autodiag-home" style="font-family:'Roboto Mono', monospace; color:#7f6000; line-height:1.55; max-width:1180px; margin:0 auto;">

    <!-- Intro -->
    <section class="ad-intro">
      <h1 style="color:#783f04; margin:0; font-size:30px;">Autodiagn√≥stico de Matem√°tica a Pedal</h1>
      <p>Este autodiagn√≥stico te ayuda a ubicar por d√≥nde conviene empezar a pedalear üßÆüö≤</p>
      <p>Respond√© sin calculadora si es posible. Al final vas a ver tu resultado global y sugerencias por tema.</p>
    </section>

    <!-- Progreso visual ‚Üí bicicleta -->
    <div id="unit-progress" style="margin-top:16px;"></div>

    <section class="ad-card">
      <h2>Indicaciones generales</h2>
      <p>Marc√° una sola opci√≥n en cada ejercicio.</p>
    </section>

    <!-- ============================= -->
    <!--     BLOQUE A ‚Äî U0            -->
    <!-- ============================= -->
    <section class="ad-card">
      <h2>Bloque A ‚Äî Calentamiento matem√°tico (U0)</h2>

      <div class="ad-question" data-answer="c">
        <p><b>1.</b> El n√∫mero \( \sqrt{2} \) es:</p>
        <div class="ad-options">
          <label><input type="radio" name="q1" value="a"> Natural y racional.</label>
          <label><input type="radio" name="q1" value="b"> Entero pero no racional.</label>
          <label><input type="radio" name="q1" value="c"> Real e irracional.</label>
          <label><input type="radio" name="q1" value="d"> Un n√∫mero imaginario.</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>2.</b> Calcul√° \( \frac{3}{4} + \frac{5}{6} \).</p>
        <div class="ad-options">
          <label><input type="radio" name="q2" value="a"> \( \frac{8}{10} \)</label>
          <label><input type="radio" name="q2" value="b"> \( \frac{19}{12} \)</label>
          <label><input type="radio" name="q2" value="c"> \( \frac{7}{10} \)</label>
          <label><input type="radio" name="q2" value="d"> \( \frac{23}{24} \)</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>3.</b> Orden√°: \(-2,\; -\frac12,\; 0,\; 1.5\)</p>
        <div class="ad-options">
          <label><input type="radio" name="q3" value="a"> -2 &lt; 0 &lt; -1/2 &lt; 1.5</label>
          <label><input type="radio" name="q3" value="b"> -2 &lt; -1/2 &lt; 0 &lt; 1.5</label>
          <label><input type="radio" name="q3" value="c"> -1/2 &lt; -2 &lt; 0 &lt; 1.5</label>
          <label><input type="radio" name="q3" value="d"> 0 &lt; -2 &lt; -1/2 &lt; 1.5</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>4.</b> El resultado de \( (-3)^2 - 4\cdot 2 \) es:</p>
        <div class="ad-options">
          <label><input type="radio" name="q4" value="a"> -17</label>
          <label><input type="radio" name="q4" value="b"> 1</label>
          <label><input type="radio" name="q4" value="c"> 25</label>
          <label><input type="radio" name="q4" value="d"> 5</label>
        </div>
      </div>

    </section>

    <!-- ============================= -->
    <!--     BLOQUE B ‚Äî U1            -->
    <!-- ============================= -->
    <section class="ad-card">
      <h2>Bloque B ‚Äî Conjuntos y operaciones b√°sicas (U1)</h2>

      <div class="ad-question" data-answer="a">
        <p><b>5.</b> ¬øCu√°l es verdadera?</p>
        <div class="ad-options">
          <label><input type="radio" name="q5" value="a"> \( \mathbb{N} \subset \mathbb{Z} \subset \mathbb{Q} \subset \mathbb{R} \)</label>
          <label><input type="radio" name="q5" value="b"> \( \mathbb{Q} \subset \mathbb{Z} \subset \mathbb{R} \subset \mathbb{N} \)</label>
          <label><input type="radio" name="q5" value="c"> \( \mathbb{Z} \subset \mathbb{N} \subset \mathbb{Q} \subset \mathbb{R} \)</label>
          <label><input type="radio" name="q5" value="d"> \( \mathbb{R} \subset \mathbb{Q} \subset \mathbb{Z} \subset \mathbb{N} \)</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>6.</b> \( 3(2x-5) - (x-1) = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q6" value="a"> 7x - 16</label>
          <label><input type="radio" name="q6" value="b"> 5x - 14</label>
          <label><input type="radio" name="q6" value="c"> 6x - 15 - x + 1</label>
          <label><input type="radio" name="q6" value="d"> 5x - 16</label>
        </div>
      </div>

      <div class="ad-question" data-answer="c">
        <p><b>7.</b> \( \frac{5}{8} - \frac{3}{10} = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q7" value="a"> 1/40</label>
          <label><input type="radio" name="q7" value="b"> 7/40</label>
          <label><input type="radio" name="q7" value="c"> 13/40</label>
          <label><input type="radio" name="q7" value="d"> 19/40</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>8.</b> \( -(-a+3b)= \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q8" value="a"> -a - 3b</label>
          <label><input type="radio" name="q8" value="b"> a - 3b</label>
          <label><input type="radio" name="q8" value="c"> a + 3b</label>
          <label><input type="radio" name="q8" value="d"> -a + 3b</label>
        </div>
      </div>

    </section>

    <!-- ============================= -->
    <!--     BLOQUE C ‚Äî U2            -->
    <!-- ============================= -->
    <section class="ad-card">
      <h2>Bloque C ‚Äî Factorizaci√≥n y expresiones algebraicas (U2)</h2>

      <div class="ad-question" data-answer="c">
        <p><b>9.</b> Factoriz√° \( x^2 - 9 \).</p>
        <div class="ad-options">
          <label><input type="radio" name="q9" value="a"> (x-3)^2</label>
          <label><input type="radio" name="q9" value="b"> (x-9)(x+1)</label>
          <label><input type="radio" name="q9" value="c"> (x-3)(x+3)</label>
          <label><input type="radio" name="q9" value="d"> x(x-9)</label>
        </div>
      </div>

      <div class="ad-question" data-answer="c">
        <p><b>10.</b> Desarrollo de \( (x+2)^2 \):</p>
        <div class="ad-options">
          <label><input type="radio" name="q10" value="a"> x^2 + 4</label>
          <label><input type="radio" name="q10" value="b"> x^2 + 2x + 4</label>
          <label><input type="radio" name="q10" value="c"> x^2 + 4x + 4</label>
          <label><input type="radio" name="q10" value="d"> x^2 + 2x + 2</label>
        </div>
      </div>

      <div class="ad-question" data-answer="a">
        <p><b>11.</b> \( \frac{6x^2}{9x} = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q11" value="a"> 2x/3</label>
          <label><input type="radio" name="q11" value="b"> 2x^2/3</label>
          <label><input type="radio" name="q11" value="c"> 6x/9</label>
          <label><input type="radio" name="q11" value="d"> 3x/2</label>
        </div>
      </div>

      <div class="ad-question" data-answer="a">
        <p><b>12.</b> \( 5x^3 - 10x^2 = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q12" value="a"> 5x^2(x-2)</label>
          <label><input type="radio" name="q12" value="b"> 5x(x^2 - 2)</label>
          <label><input type="radio" name="q12" value="c"> x^2(5x - 10)</label>
          <label><input type="radio" name="q12" value="d"> 5(x^3 - 2x^2)</label>
        </div>
      </div>

    </section>

    <!-- ============================= -->
    <!--     BLOQUE D ‚Äî U3            -->
    <!-- ============================= -->
    <section class="ad-card">
      <h2>Bloque D ‚Äî Trigonometr√≠a (U3)</h2>

      <div class="ad-question" data-answer="b">
        <p><b>13.</b> 150¬∞ = ?</p>
        <div class="ad-options">
          <label><input type="radio" name="q13" value="a"> œÄ/3</label>
          <label><input type="radio" name="q13" value="b"> 5œÄ/6</label>
          <label><input type="radio" name="q13" value="c"> 2œÄ/3</label>
          <label><input type="radio" name="q13" value="d"> 3œÄ/4</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>14.</b> \( \sin(\pi/6) = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q14" value="a"> ‚àö3/2</label>
          <label><input type="radio" name="q14" value="b"> 1/2</label>
          <label><input type="radio" name="q14" value="c"> ‚àö2/2</label>
          <label><input type="radio" name="q14" value="d"> 1</label>
        </div>
      </div>

      <div class="ad-question" data-answer="a">
        <p><b>15.</b> Tri√°ngulo rect√°ngulo, √°ngulo 30¬∞, hipotenusa 10 ‚Üí cateto opuesto:</p>
        <div class="ad-options">
          <label><input type="radio" name="q15" value="a"> 5</label>
          <label><input type="radio" name="q15" value="b"> 5‚àö3</label>
          <label><input type="radio" name="q15" value="c"> 10</label>
          <label><input type="radio" name="q15" value="d"> 10/‚àö3</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>16.</b> Si el per√≠odo es T=4 s, la frecuencia es:</p>
        <div class="ad-options">
          <label><input type="radio" name="q16" value="a"> 4 Hz</label>
          <label><input type="radio" name="q16" value="b"> 1/4 Hz</label>
          <label><input type="radio" name="q16" value="c"> 2 Hz</label>
          <label><input type="radio" name="q16" value="d"> 1/2 Hz</label>
        </div>
      </div>

    </section>

    <!-- ============================= -->
    <!--     BLOQUE E ‚Äî U4            -->
    <!-- ============================= -->
    <section class="ad-card">
      <h2>Bloque E ‚Äî Potencias, ra√≠ces y notaci√≥n cient√≠fica (U4)</h2>

      <div class="ad-question" data-answer="a">
        <p><b>17.</b> \( 2^3 \cdot 2^4 = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q17" value="a"> 2^7 = 128</label>
          <label><input type="radio" name="q17" value="b"> 2^{12} = 4096</label>
          <label><input type="radio" name="q17" value="c"> 2</label>
          <label><input type="radio" name="q17" value="d"> 24</label>
        </div>
      </div>

      <div class="ad-question" data-answer="a">
        <p><b>18.</b> \( \sqrt[3]{8} = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q18" value="a"> 2</label>
          <label><input type="radio" name="q18" value="b"> 4</label>
          <label><input type="radio" name="q18" value="c"> ‚àö8</label>
          <label><input type="radio" name="q18" value="d"> 1/2</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>19.</b> \( 0.00045 = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q19" value="a"> 4,5√ó10‚Åª¬≥</label>
          <label><input type="radio" name="q19" value="b"> 4,5√ó10‚Åª‚Å¥</label>
          <label><input type="radio" name="q19" value="c"> 45√ó10‚Åª‚Åµ</label>
          <label><input type="radio" name="q19" value="d"> 0,45√ó10‚Åª‚Å¥</label>
        </div>
      </div>

      <div class="ad-question" data-answer="b">
        <p><b>20.</b> \( 5√ó10^{-2} = \)</p>
        <div class="ad-options">
          <label><input type="radio" name="q20" value="a"> 0,5</label>
          <label><input type="radio" name="q20" value="b"> 0,05</label>
          <label><input type="radio" name="q20" value="c"> 5</label>
          <label><input type="radio" name="q20" value="d"> 500</label>
        </div>
      </div>

    </section>

    <!-- ============================= -->
    <!--     RESULTADOS               -->
    <!-- ============================= -->
    <section class="ad-card">
      <h2>Resultados</h2>
      <div class="ad-actions">
        <button id="ad-submit" type="button">‚úÖ Corregir autodiagn√≥stico</button>
        <button id="ad-reset" type="button">üîÑ Reset respuestas</button>
      </div>
      <div id="ad-result" class="ad-result">
        <p style="margin:0; opacity:.8;">Aqu√≠ aparecer√°n tus resultados.</p>
      </div>
    </section>

  </main>

  <!-- Firebase -->
  <script type="module" src="/matematica-a-pedal/assets/firebase-init.js"></script>
  <script type="module" src="/matematica-a-pedal/assets/progress-sync.js"></script>

  <!-- Progress bike bar -->
  <script src="/matematica-a-pedal/assets/progress-bar-bike.js"></script>

  <!-- ===== L√ìGICA DEL AUTODIAGN√ìSTICO ===== -->
  <script>
  (function(){

    const answerKey = {
      q1:'c', q2:'b', q3:'b', q4:'b',
      q5:'a', q6:'b', q7:'c', q8:'b',
      q9:'c', q10:'c', q11:'a', q12:'a',
      q13:'b', q14:'b', q15:'a', q16:'b',
      q17:'a', q18:'a', q19:'b', q20:'b'
    };

    const topicMap = {
      q1:'U0', q2:'U0', q3:'U0', q4:'U0',
      q5:'U1', q6:'U1', q7:'U1', q8:'U1',
      q9:'U2', q10:'U2', q11:'U2', q12:'U2',
      q13:'U3', q14:'U3', q15:'U3', q16:'U3',
      q17:'U4', q18:'U4', q19:'U4', q20:'U4'
    };

    const topicLabels = {
      U0:'Calentamiento matem√°tico (Unidad 0)',
      U1:'Conjuntos y operaciones b√°sicas (Unidad 1)',
      U2:'Factorizaci√≥n y expresiones algebraicas (Unidad 2)',
      U3:'Trigonometr√≠a (Unidad 3)',
      U4:'Potencias y notaci√≥n cient√≠fica (Unidad 4)'
    };

    const submitBtn = document.getElementById('ad-submit');
    const resetBtn  = document.getElementById('ad-reset');
    const resultBox = document.getElementById('ad-result');

    function corregir(){
      let total = 0, correct = 0;
      let topicTotals = {}, topicCorrect = {};

      for (const qid in answerKey){
        total++;
        const radios = document.querySelectorAll('input[name="'+qid+'"]');
        let chosen = null;
        radios.forEach(r => { if (r.checked) chosen = r.value; });

        const topic = topicMap[qid];
        topicTotals[topic]  = (topicTotals[topic]  || 0) + 1;

        if (chosen === answerKey[qid]){
          correct++;
          topicCorrect[topic] = (topicCorrect[topic] || 0) + 1;
        }
      }

      const pct = Math.round(100 * correct / total);

      let html = `<p><b>Resultado global:</b> ${correct}/${total} (${pct}%).</p>`;

      if (pct >= 80){
        html += `<p>Buen nivel general.</p>`;
      }
      else if (pct >= 50){
        html += `<p>Nivel intermedio. Conviene repasar algunas unidades.</p>`;
      }
      else {
        html += `<p>Conviene comenzar por las unidades iniciales y avanzar con calma.</p>`;
      }

      html += `<h3 style="color:#783f04;">Sugerencias por tema</h3><ul>`;
      Object.keys(topicTotals).forEach(t => {
        const ok  = topicCorrect[t] || 0;
        const tot = topicTotals[t];
        const p   = Math.round(100 * ok / tot);
        let msg = (p>=80) ? 'Buen dominio.' : (p>=50) ? 'Nivel medio.' : 'Conviene repasarlo.';
        html += `<li><b>${topicLabels[t]}</b>: ${ok}/${tot} (${p}%). ${msg}</li>`;
      });
      html += `</ul>`;

      resultBox.innerHTML = html;
      resultBox.scrollIntoView({behavior:'smooth'});
    }

    function resetear(){
      if (!confirm('¬øBorrar tus respuestas?')) return;
      document.querySelectorAll('#autodiag-home input[type="radio"]').forEach(r => r.checked = false);
      resultBox.innerHTML = `<p style="margin:0; opacity:.8;">Aqu√≠ aparecer√°n tus resultados.</p>`;
    }

    submitBtn.addEventListener('click', corregir);
    resetBtn.addEventListener('click', resetear);

  })();
  </script>

</body>
</html>
